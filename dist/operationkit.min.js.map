{"version":3,"sources":["webpack://operationkit/webpack/universalModuleDefinition","webpack://operationkit/webpack/bootstrap","webpack://operationkit/./src/QueuePriority.ts","webpack://operationkit/./src/OperationEvent.ts","webpack://operationkit/./src/utils.ts","webpack://operationkit/./src/QueueEvent.ts","webpack://operationkit/./src/Operation.ts","webpack://operationkit/./node_modules/events/events.js","webpack://operationkit/./src/OperationQueue.ts","webpack://operationkit/./node_modules/uuid/lib/rng-browser.js","webpack://operationkit/./node_modules/uuid/lib/bytesToUuid.js","webpack://operationkit/./node_modules/uuid/index.js","webpack://operationkit/./src/CircularOperationValidator.js","webpack://operationkit/./src/BlockOperation.ts","webpack://operationkit/./src/GroupOperation.ts","webpack://operationkit/./src/index.ts","webpack://operationkit/(webpack)/buildin/harmony-module.js","webpack://operationkit/./node_modules/uuid/v1.js","webpack://operationkit/./node_modules/uuid/v4.js"],"names":["root","factory","exports","module","define","amd","window","installedModules","__webpack_require__","moduleId","i","l","modules","call","m","c","d","name","getter","o","Object","defineProperty","enumerable","get","r","Symbol","toStringTag","value","t","mode","__esModule","ns","create","key","bind","n","object","property","prototype","hasOwnProperty","p","s","QueuePriority","__webpack_exports__","OperationEvent","copyArray","isObjectEmpty","array","map","assign","QueueEvent","Operation","_super","id","_this","this","_queuePriority","_QueuePriority__WEBPACK_IMPORTED_MODULE_0__","normal","uuid__WEBPACK_IMPORTED_MODULE_2__","completionCallback","isExecuting","error","promise","runPromise","_dependencies","_done","_isInQueue","_canStart","_cancelled","_resolve","_reject","__extends","isCancelled","isFinished","_utils__WEBPACK_IMPORTED_MODULE_4__","operations","cancel","Promise","resolve","emit","_OperationEvent__WEBPACK_IMPORTED_MODULE_3__","CANCEL","done","DONE","result","isDone","addDependency","dependency","push","removeDependency","filter","operation","start","_preProcessStart","READY","main","reject","START","run","then","catch","e","ERROR","err","_createMap","length","forEach","on","_onDependantOperationDone","_tryStart","isInQueue","events__WEBPACK_IMPORTED_MODULE_1__","ReflectOwnKeys","R","Reflect","ReflectApply","apply","target","receiver","args","Function","ownKeys","getOwnPropertySymbols","getOwnPropertyNames","concat","NumberIsNaN","Number","isNaN","EventEmitter","init","_events","undefined","_eventsCount","_maxListeners","defaultMaxListeners","$getMaxListeners","that","_addListener","type","listener","prepend","events","existing","warning","TypeError","newListener","unshift","warned","w","Error","String","emitter","count","console","warn","_onceWrap","state","fired","wrapFn","wrapped","arguments","removeListener","_listeners","unwrap","evlistener","arr","ret","Array","unwrapListeners","arrayClone","listenerCount","copy","set","arg","RangeError","getPrototypeOf","setMaxListeners","getMaxListeners","doError","er","message","context","handler","len","listeners","addListener","prependListener","once","prependOnceListener","list","position","originalListener","shift","index","pop","spliceOne","off","removeAllListeners","keys","rawListeners","eventNames","OperationQueue","_processedOperations","maximumConcurrentOperations","readyQueueMap","readyQueue","runningQueueMap","runningQueue","queues","_QueuePriority__WEBPACK_IMPORTED_MODULE_3__","high","low","veryLow","veryHigh","_utils__WEBPACK_IMPORTED_MODULE_5__","addOperation","addOperations","_preProcessOperations","_begin","pause","_paused","_QueueEvent__WEBPACK_IMPORTED_MODULE_4__","PAUSED","resume","RESUMED","_checkNextOperation","_CircularOperationValidator__WEBPACK_IMPORTED_MODULE_1__","op","_bindOperation","dependencies","_OperationEvent__WEBPACK_IMPORTED_MODULE_2__","_onOperationStart","_onOperationReady","_onOperationCancel","_onOperationDone","_unbindOperation","_startOperations","_startOperation","queuePriority","hasOperations","getNextOperation","events__WEBPACK_IMPORTED_MODULE_0__","getRandomValues","crypto","msCrypto","rnds8","Uint8Array","rnds","Math","random","byteToHex","toString","substr","buf","offset","bth","join","v1","v4","uuid","CircularOperationValidatorError","[object Object]","super","CircularOperationValidator","_checkCircular","_verifyOpMap","_checkDependencies","mapHash","JSON","parse","stringify","_throwError","values","BlockOperation","block","first","second","blocks","promises","all","results","_a","sent","addBlock","_Operation__WEBPACK_IMPORTED_MODULE_0__","GroupOperation","queue","_OperationQueue__WEBPACK_IMPORTED_MODULE_1__","accum","reduce","_BlockOperation__WEBPACK_IMPORTED_MODULE_2__","_GroupOperation__WEBPACK_IMPORTED_MODULE_3__","_OperationEvent__WEBPACK_IMPORTED_MODULE_4__","_QueueEvent__WEBPACK_IMPORTED_MODULE_5__","_QueuePriority__WEBPACK_IMPORTED_MODULE_6__","originalModule","webpackPolyfill","children","_nodeId","_clockseq","rng","bytesToUuid","_lastMSecs","_lastNSecs","options","b","node","clockseq","seedBytes","msecs","Date","getTime","nsecs","dt","tl","tmh","ii"],"mappings":"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","file":"operationkit.min.js","sourcesContent":["(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory();\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine(\"operationkit\", [], factory);\n\telse if(typeof exports === 'object')\n\t\texports[\"operationkit\"] = factory();\n\telse\n\t\troot[\"operationkit\"] = factory();\n})(window, function() {\nreturn "," \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 13);\n","\n/**\n * Priority given to an operation when it is executed inside an OperationQueue.\n */\nexport enum QueuePriority {\n    veryLow,\n    low,\n    normal,\n    high,\n    veryHigh\n}","\n/**\n * Events fired from Operation\n */\nexport enum OperationEvent {\n    /**\n     * Event when operation starts\n     */\n    START = 'start',\n    /**\n     * Event when operation is ready to be executed\n     */\n    READY = 'ready',\n    /**\n     * Event when operation is done\n     */\n    DONE = 'done',\n    /**\n     * Event when operation is cancelled\n     */\n    CANCEL = 'cancel',\n    /**\n     * Event when something went wrong\n     */\n    ERROR = 'error'\n}","\nexport const copyArray: (array: any[]) => any[] = (array: any[]) => {\n    return array.map(object => Object.assign(Object.create(object), object))\n};\n\nexport const copyObject: (objet: Object) => Object = (object: Object) => {\n    return Object.assign(Object.create(object), object);\n};\n\nexport const isObjectEmpty: (object: Object) => boolean = (object: Object) => {\n    for (const key in object) {\n        return false;\n    }\n    return true;\n};","\n/**\n * Events fired from OperationQueue\n */\nexport enum QueueEvent {\n    DONE = 'done',\n    PAUSED = 'paused',\n    RESUMED = 'resumed'\n}","import {QueuePriority} from './QueuePriority';\n\nimport {EventEmitter} from 'events';\nimport { v4 as uuidv4 } from 'uuid';\n\nimport {OperationEvent} from './OperationEvent';\nimport {copyArray, isObjectEmpty} from './utils';\n\n/**\n * @class Operation\n * @constructor Operation\n * @description Abstract class which runs a single task\n */\nexport abstract class Operation<T> extends EventEmitter {\n\n    public id: string;\n    public result: T;\n    public name: string;\n    public completionCallback?: Function;\n    public map: Object;\n    public isExecuting: boolean;\n    public error: boolean;\n    public promise?: Promise<any>;\n    public runPromise?: Promise<any>;\n\n    private _dependencies: Operation<any>[];\n    private _done: boolean;\n    private _isInQueue: boolean;\n    private _canStart: boolean;\n    private _cancelled: boolean;\n    private _resolve: Function;\n    private _reject: Function;\n    private _queuePriority: QueuePriority = QueuePriority.normal;\n\n    /**\n     * @param {number} [id]\n     */\n    constructor(id = null) {\n        super();\n        \n        if (!id) {\n            id = uuidv4()\n        }\n\n        this.id = id;\n        this.name = null;\n        this.completionCallback = null;\n        this.map = {};\n        this.isExecuting = false;\n        this.error = true;\n        this.promise = null;\n        this.runPromise = null;\n\n        this._dependencies = [];\n        this._done = false;\n        this._isInQueue = false;\n        this._canStart = false;\n        this._cancelled = false;\n\n        this._resolve = null;\n        this._reject = null;\n    }\n\n    /**\n     * @description Getter returning if Operation finished its task\n     * @returns {boolean}\n     */\n    get isFinished(): boolean {\n        return this._done;\n    }\n\n    /**\n     * @description Knowing if operation was cancelled\n     * @returns {boolean}\n     */\n    get isCancelled(): boolean {\n        return this._cancelled;\n    }\n\n    /**\n     * Setter for isInQueue value\n     * @param {boolean} value\n     */\n    set isInQueue(value) {\n        this._isInQueue = value;\n    }\n\n    /**\n     * Getter for isInQueue value\n     */\n    get isInQueue(): boolean {\n        return this._isInQueue;\n    }\n\n    /**\n     * Setter for queuePriority value.\n     * It is only settable when operation has not yet executed, cancelled or finished\n     * @param {QueuePriority} value\n     */\n    set queuePriority(value: QueuePriority) {\n        if (this.isExecuting || this.isCancelled || this.isFinished) {\n            return;\n        }\n        if (value in QueuePriority) {\n            this._queuePriority = value;\n        }\n    }\n\n    /**\n     * Getter for queuePriority value\n     * @returns {QueuePriority|number}\n     */\n    get queuePriority(): QueuePriority {\n        return this._queuePriority;\n    }\n\n    /**\n     * Setter for dependencies value.\n     * It is only settable when operation has not yet executed, cancelled or finished\n     * @param {Array.<Operation>} operations\n     */\n    set dependencies(operations: Operation<any>[]) {\n        if (this.isExecuting || this.isCancelled || this.isFinished) {\n            return;\n        }\n\n        this._dependencies = operations;\n    }\n\n    /**\n     * Getter for dependencies value.\n     * When operation is executing, cancelled, or finished, this returns a copy\n     * @returns {Array.<Operation>}\n     */\n    get dependencies(): Operation<any>[] {\n        if (this.isExecuting || this.isCancelled || this.isFinished) {\n            return copyArray(this._dependencies);\n        }\n        return this._dependencies;\n    }\n\n    /**\n     * @abstract\n     * @description Needs to be implemented by sub-class\n     *  This is the task to be executed\n     */\n    abstract async run(): Promise<T>;\n\n    /**\n     * @description Cancels the operation if the operation has not started.\n     * @returns {undefined}\n     */\n    public cancel(): void {\n        this._cancelled = true;\n        Promise.resolve(this.promise);\n        this.emit(OperationEvent.CANCEL, this);\n        this._resolve && this._resolve();\n    }\n\n    /**\n     * @description Sets the operation as done. This is usually called internally or by the operationQueue\n     * @returns {undefined}\n     */\n    public done(): void {\n        this._done = true;\n        this.completionCallback && this.completionCallback(this);\n        this.emit(OperationEvent.DONE, this);\n        this._resolve && this._resolve(this.result);\n    }\n\n    /**\n     * @description Knowing if operation finished its task\n     * @returns {boolean} \n     */\n    public isDone(): boolean {\n        return this._done;\n    }\n\n    /**\n     * Adds an operation as a dependency\n     * @param {Operation} dependency \n     */\n    public addDependency(dependency: Operation<any>): void {\n        this._dependencies.push(dependency);\n    }\n\n    /**\n     * Removes an operation as a dependency\n     * @param {Operation} dependency \n     */\n    public removeDependency(dependency: Operation<any>): void {\n        this._dependencies = this._dependencies.filter(operation => operation.id !== dependency.id)\n    }\n\n    /**\n     * Method to call to execute the operation's task.\n     * The operation will not run immediatly. It is evaluated at the next tick and evaluates it's depedencies\n     * in order to run. Calling this method multiples times will simply re-evaluate it's readiness\n     * @returns {Promise} \n     */\n    public start(): Promise<T> {\n        if (this.isExecuting || this.isCancelled || this.isFinished) {\n            return this.promise;\n        } else if (this.promise && !this._canStart) {\n            this._preProcessStart();\n        } else if (this.promise && this._canStart) {\n            if (this._isInQueue) {\n                this.emit(OperationEvent.READY, this);\n            } else {\n                this.main();\n            }\n        } else {\n            this.promise = new Promise((resolve, reject) => {\n                this._resolve = resolve;\n                this._reject = reject;\n                this._preProcessStart();\n            });\n        }\n        return this.promise;\n    }\n\n    /**\n     */\n    public main(): void {\n        this.isExecuting = true;\n        this.emit(OperationEvent.START, this);\n        this.runPromise = this.run()\n            .then(result => {\n                this.result = result;\n                this.done();\n            })\n            .catch(e => {\n                this.isExecuting = false;\n                this.error = true;\n                this.emit(OperationEvent.ERROR, {err: e, operation: this});\n                this.emit(OperationEvent.DONE, this);\n                this._reject && this._reject();\n            });\n    }\n\n    private _preProcessStart(): void {\n        this._createMap();\n\n        if (this._canStart) {\n            if (this._isInQueue) {\n                this.emit(OperationEvent.READY, this);\n            } else {\n                this.main();\n            }\n        }\n    }\n\n    private _createMap(): void {\n        if (!this._dependencies.length) {\n            this._canStart = true;\n            return;\n        }\n\n        this._dependencies.forEach(operation => {\n            this.map[operation.id] = true;\n            operation.on(OperationEvent.DONE, this._onDependantOperationDone.bind(this));\n            operation.start();\n        });\n\n    }\n\n    private _onDependantOperationDone(operation): void {\n        delete this.map[operation.id];\n        this._tryStart();\n    }\n\n    private _tryStart(): void {\n        if (this.isExecuting || this.isCancelled || this.isFinished) {\n            return;\n        }\n        if (isObjectEmpty(this.map)) {\n            // should emit event to let operation queue that this operation can start\n            // then it could check if maximum concurrent is not passed\n            this._canStart = true;\n            if (this.isInQueue) {\n                this.emit(OperationEvent.READY, this);\n            } else {\n                this.start();\n            }\n        }\n    }\n}","// Copyright Joyent, Inc. and other Node contributors.\n//\n// Permission is hereby granted, free of charge, to any person obtaining a\n// copy of this software and associated documentation files (the\n// \"Software\"), to deal in the Software without restriction, including\n// without limitation the rights to use, copy, modify, merge, publish,\n// distribute, sublicense, and/or sell copies of the Software, and to permit\n// persons to whom the Software is furnished to do so, subject to the\n// following conditions:\n//\n// The above copyright notice and this permission notice shall be included\n// in all copies or substantial portions of the Software.\n//\n// THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS\n// OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF\n// MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN\n// NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM,\n// DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR\n// OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE\n// USE OR OTHER DEALINGS IN THE SOFTWARE.\n\n'use strict';\n\nvar R = typeof Reflect === 'object' ? Reflect : null\nvar ReflectApply = R && typeof R.apply === 'function'\n  ? R.apply\n  : function ReflectApply(target, receiver, args) {\n    return Function.prototype.apply.call(target, receiver, args);\n  }\n\nvar ReflectOwnKeys\nif (R && typeof R.ownKeys === 'function') {\n  ReflectOwnKeys = R.ownKeys\n} else if (Object.getOwnPropertySymbols) {\n  ReflectOwnKeys = function ReflectOwnKeys(target) {\n    return Object.getOwnPropertyNames(target)\n      .concat(Object.getOwnPropertySymbols(target));\n  };\n} else {\n  ReflectOwnKeys = function ReflectOwnKeys(target) {\n    return Object.getOwnPropertyNames(target);\n  };\n}\n\nfunction ProcessEmitWarning(warning) {\n  if (console && console.warn) console.warn(warning);\n}\n\nvar NumberIsNaN = Number.isNaN || function NumberIsNaN(value) {\n  return value !== value;\n}\n\nfunction EventEmitter() {\n  EventEmitter.init.call(this);\n}\nmodule.exports = EventEmitter;\n\n// Backwards-compat with node 0.10.x\nEventEmitter.EventEmitter = EventEmitter;\n\nEventEmitter.prototype._events = undefined;\nEventEmitter.prototype._eventsCount = 0;\nEventEmitter.prototype._maxListeners = undefined;\n\n// By default EventEmitters will print a warning if more than 10 listeners are\n// added to it. This is a useful default which helps finding memory leaks.\nvar defaultMaxListeners = 10;\n\nObject.defineProperty(EventEmitter, 'defaultMaxListeners', {\n  enumerable: true,\n  get: function() {\n    return defaultMaxListeners;\n  },\n  set: function(arg) {\n    if (typeof arg !== 'number' || arg < 0 || NumberIsNaN(arg)) {\n      throw new RangeError('The value of \"defaultMaxListeners\" is out of range. It must be a non-negative number. Received ' + arg + '.');\n    }\n    defaultMaxListeners = arg;\n  }\n});\n\nEventEmitter.init = function() {\n\n  if (this._events === undefined ||\n      this._events === Object.getPrototypeOf(this)._events) {\n    this._events = Object.create(null);\n    this._eventsCount = 0;\n  }\n\n  this._maxListeners = this._maxListeners || undefined;\n};\n\n// Obviously not all Emitters should be limited to 10. This function allows\n// that to be increased. Set to zero for unlimited.\nEventEmitter.prototype.setMaxListeners = function setMaxListeners(n) {\n  if (typeof n !== 'number' || n < 0 || NumberIsNaN(n)) {\n    throw new RangeError('The value of \"n\" is out of range. It must be a non-negative number. Received ' + n + '.');\n  }\n  this._maxListeners = n;\n  return this;\n};\n\nfunction $getMaxListeners(that) {\n  if (that._maxListeners === undefined)\n    return EventEmitter.defaultMaxListeners;\n  return that._maxListeners;\n}\n\nEventEmitter.prototype.getMaxListeners = function getMaxListeners() {\n  return $getMaxListeners(this);\n};\n\nEventEmitter.prototype.emit = function emit(type) {\n  var args = [];\n  for (var i = 1; i < arguments.length; i++) args.push(arguments[i]);\n  var doError = (type === 'error');\n\n  var events = this._events;\n  if (events !== undefined)\n    doError = (doError && events.error === undefined);\n  else if (!doError)\n    return false;\n\n  // If there is no 'error' event listener then throw.\n  if (doError) {\n    var er;\n    if (args.length > 0)\n      er = args[0];\n    if (er instanceof Error) {\n      // Note: The comments on the `throw` lines are intentional, they show\n      // up in Node's output if this results in an unhandled exception.\n      throw er; // Unhandled 'error' event\n    }\n    // At least give some kind of context to the user\n    var err = new Error('Unhandled error.' + (er ? ' (' + er.message + ')' : ''));\n    err.context = er;\n    throw err; // Unhandled 'error' event\n  }\n\n  var handler = events[type];\n\n  if (handler === undefined)\n    return false;\n\n  if (typeof handler === 'function') {\n    ReflectApply(handler, this, args);\n  } else {\n    var len = handler.length;\n    var listeners = arrayClone(handler, len);\n    for (var i = 0; i < len; ++i)\n      ReflectApply(listeners[i], this, args);\n  }\n\n  return true;\n};\n\nfunction _addListener(target, type, listener, prepend) {\n  var m;\n  var events;\n  var existing;\n\n  if (typeof listener !== 'function') {\n    throw new TypeError('The \"listener\" argument must be of type Function. Received type ' + typeof listener);\n  }\n\n  events = target._events;\n  if (events === undefined) {\n    events = target._events = Object.create(null);\n    target._eventsCount = 0;\n  } else {\n    // To avoid recursion in the case that type === \"newListener\"! Before\n    // adding it to the listeners, first emit \"newListener\".\n    if (events.newListener !== undefined) {\n      target.emit('newListener', type,\n                  listener.listener ? listener.listener : listener);\n\n      // Re-assign `events` because a newListener handler could have caused the\n      // this._events to be assigned to a new object\n      events = target._events;\n    }\n    existing = events[type];\n  }\n\n  if (existing === undefined) {\n    // Optimize the case of one listener. Don't need the extra array object.\n    existing = events[type] = listener;\n    ++target._eventsCount;\n  } else {\n    if (typeof existing === 'function') {\n      // Adding the second element, need to change to array.\n      existing = events[type] =\n        prepend ? [listener, existing] : [existing, listener];\n      // If we've already got an array, just append.\n    } else if (prepend) {\n      existing.unshift(listener);\n    } else {\n      existing.push(listener);\n    }\n\n    // Check for listener leak\n    m = $getMaxListeners(target);\n    if (m > 0 && existing.length > m && !existing.warned) {\n      existing.warned = true;\n      // No error code for this since it is a Warning\n      // eslint-disable-next-line no-restricted-syntax\n      var w = new Error('Possible EventEmitter memory leak detected. ' +\n                          existing.length + ' ' + String(type) + ' listeners ' +\n                          'added. Use emitter.setMaxListeners() to ' +\n                          'increase limit');\n      w.name = 'MaxListenersExceededWarning';\n      w.emitter = target;\n      w.type = type;\n      w.count = existing.length;\n      ProcessEmitWarning(w);\n    }\n  }\n\n  return target;\n}\n\nEventEmitter.prototype.addListener = function addListener(type, listener) {\n  return _addListener(this, type, listener, false);\n};\n\nEventEmitter.prototype.on = EventEmitter.prototype.addListener;\n\nEventEmitter.prototype.prependListener =\n    function prependListener(type, listener) {\n      return _addListener(this, type, listener, true);\n    };\n\nfunction onceWrapper() {\n  var args = [];\n  for (var i = 0; i < arguments.length; i++) args.push(arguments[i]);\n  if (!this.fired) {\n    this.target.removeListener(this.type, this.wrapFn);\n    this.fired = true;\n    ReflectApply(this.listener, this.target, args);\n  }\n}\n\nfunction _onceWrap(target, type, listener) {\n  var state = { fired: false, wrapFn: undefined, target: target, type: type, listener: listener };\n  var wrapped = onceWrapper.bind(state);\n  wrapped.listener = listener;\n  state.wrapFn = wrapped;\n  return wrapped;\n}\n\nEventEmitter.prototype.once = function once(type, listener) {\n  if (typeof listener !== 'function') {\n    throw new TypeError('The \"listener\" argument must be of type Function. Received type ' + typeof listener);\n  }\n  this.on(type, _onceWrap(this, type, listener));\n  return this;\n};\n\nEventEmitter.prototype.prependOnceListener =\n    function prependOnceListener(type, listener) {\n      if (typeof listener !== 'function') {\n        throw new TypeError('The \"listener\" argument must be of type Function. Received type ' + typeof listener);\n      }\n      this.prependListener(type, _onceWrap(this, type, listener));\n      return this;\n    };\n\n// Emits a 'removeListener' event if and only if the listener was removed.\nEventEmitter.prototype.removeListener =\n    function removeListener(type, listener) {\n      var list, events, position, i, originalListener;\n\n      if (typeof listener !== 'function') {\n        throw new TypeError('The \"listener\" argument must be of type Function. Received type ' + typeof listener);\n      }\n\n      events = this._events;\n      if (events === undefined)\n        return this;\n\n      list = events[type];\n      if (list === undefined)\n        return this;\n\n      if (list === listener || list.listener === listener) {\n        if (--this._eventsCount === 0)\n          this._events = Object.create(null);\n        else {\n          delete events[type];\n          if (events.removeListener)\n            this.emit('removeListener', type, list.listener || listener);\n        }\n      } else if (typeof list !== 'function') {\n        position = -1;\n\n        for (i = list.length - 1; i >= 0; i--) {\n          if (list[i] === listener || list[i].listener === listener) {\n            originalListener = list[i].listener;\n            position = i;\n            break;\n          }\n        }\n\n        if (position < 0)\n          return this;\n\n        if (position === 0)\n          list.shift();\n        else {\n          spliceOne(list, position);\n        }\n\n        if (list.length === 1)\n          events[type] = list[0];\n\n        if (events.removeListener !== undefined)\n          this.emit('removeListener', type, originalListener || listener);\n      }\n\n      return this;\n    };\n\nEventEmitter.prototype.off = EventEmitter.prototype.removeListener;\n\nEventEmitter.prototype.removeAllListeners =\n    function removeAllListeners(type) {\n      var listeners, events, i;\n\n      events = this._events;\n      if (events === undefined)\n        return this;\n\n      // not listening for removeListener, no need to emit\n      if (events.removeListener === undefined) {\n        if (arguments.length === 0) {\n          this._events = Object.create(null);\n          this._eventsCount = 0;\n        } else if (events[type] !== undefined) {\n          if (--this._eventsCount === 0)\n            this._events = Object.create(null);\n          else\n            delete events[type];\n        }\n        return this;\n      }\n\n      // emit removeListener for all listeners on all events\n      if (arguments.length === 0) {\n        var keys = Object.keys(events);\n        var key;\n        for (i = 0; i < keys.length; ++i) {\n          key = keys[i];\n          if (key === 'removeListener') continue;\n          this.removeAllListeners(key);\n        }\n        this.removeAllListeners('removeListener');\n        this._events = Object.create(null);\n        this._eventsCount = 0;\n        return this;\n      }\n\n      listeners = events[type];\n\n      if (typeof listeners === 'function') {\n        this.removeListener(type, listeners);\n      } else if (listeners !== undefined) {\n        // LIFO order\n        for (i = listeners.length - 1; i >= 0; i--) {\n          this.removeListener(type, listeners[i]);\n        }\n      }\n\n      return this;\n    };\n\nfunction _listeners(target, type, unwrap) {\n  var events = target._events;\n\n  if (events === undefined)\n    return [];\n\n  var evlistener = events[type];\n  if (evlistener === undefined)\n    return [];\n\n  if (typeof evlistener === 'function')\n    return unwrap ? [evlistener.listener || evlistener] : [evlistener];\n\n  return unwrap ?\n    unwrapListeners(evlistener) : arrayClone(evlistener, evlistener.length);\n}\n\nEventEmitter.prototype.listeners = function listeners(type) {\n  return _listeners(this, type, true);\n};\n\nEventEmitter.prototype.rawListeners = function rawListeners(type) {\n  return _listeners(this, type, false);\n};\n\nEventEmitter.listenerCount = function(emitter, type) {\n  if (typeof emitter.listenerCount === 'function') {\n    return emitter.listenerCount(type);\n  } else {\n    return listenerCount.call(emitter, type);\n  }\n};\n\nEventEmitter.prototype.listenerCount = listenerCount;\nfunction listenerCount(type) {\n  var events = this._events;\n\n  if (events !== undefined) {\n    var evlistener = events[type];\n\n    if (typeof evlistener === 'function') {\n      return 1;\n    } else if (evlistener !== undefined) {\n      return evlistener.length;\n    }\n  }\n\n  return 0;\n}\n\nEventEmitter.prototype.eventNames = function eventNames() {\n  return this._eventsCount > 0 ? ReflectOwnKeys(this._events) : [];\n};\n\nfunction arrayClone(arr, n) {\n  var copy = new Array(n);\n  for (var i = 0; i < n; ++i)\n    copy[i] = arr[i];\n  return copy;\n}\n\nfunction spliceOne(list, index) {\n  for (; index + 1 < list.length; index++)\n    list[index] = list[index + 1];\n  list.pop();\n}\n\nfunction unwrapListeners(arr) {\n  var ret = new Array(arr.length);\n  for (var i = 0; i < ret.length; ++i) {\n    ret[i] = arr[i].listener || arr[i];\n  }\n  return ret;\n}\n","import { EventEmitter } from 'events';\nimport { CircularOperationValidator } from './CircularOperationValidator';\nimport { OperationEvent} from './OperationEvent';\nimport { QueuePriority } from './QueuePriority';\nimport { QueueEvent } from './QueueEvent';\nimport { isObjectEmpty } from './utils';\nimport { Operation } from './Operation';\n\n/**\n * @class OperationQueue\n */\nexport class OperationQueue extends EventEmitter {\n\n    public map: Object;\n    public operations: Operation<any>[];\n    public resolve: Function;\n    public reject: Function;\n    public completionCallback: Function;\n    public maximumConcurrentOperations: number;\n    public readyQueueMap: Object;\n    public readyQueue: Object;\n    public runningQueueMap: Object;\n    public runningQueue: Operation<any>[];\n    public queues: Object;\n    public promise: Promise<any>;\n    private _paused:boolean;\n    private _processedOperations: Operation<any>[];\n\n    constructor() {\n        super();\n        this.map = {};\n        this.operations = [];\n        this._processedOperations = [];\n        this.resolve = null;\n        this.completionCallback = null;\n        this.maximumConcurrentOperations = 10;\n\n        this.readyQueueMap = {};\n        this.readyQueue = [];\n\n        this.runningQueueMap = {};\n        this.runningQueue = [];\n\n        this.queues = {};\n        this.queues[QueuePriority.high] = [];\n        this.queues[QueuePriority.normal] = [];\n        this.queues[QueuePriority.low] = [];\n        this.queues[QueuePriority.veryLow] = [];\n        this.queues[QueuePriority.veryHigh] = [];\n    }\n\n    /**\n     * Getter\n     * @returns {boolean}\n     */\n    get isExecuting() {\n        return !isObjectEmpty(this.map);\n    }\n\n    /**\n     * Complete the queue, this will resolve and notify its callback\n     */\n    done() {\n        this.completionCallback && this.completionCallback();\n        this.resolve();\n    }\n\n    /**\n     * @param {Operation} operation\n     */\n    addOperation(operation: Operation<any>): Promise<any> {\n        return this.addOperations([operation]);\n    }\n\n    /**\n     * @param {Array.<Operation>} operations\n     */\n    addOperations(operations: Operation<any>[]): Promise<any> {\n        this.operations = this.operations.concat(operations);\n        this._preProcessOperations(operations);\n        this._processedOperations = this._processedOperations.concat(this.operations);\n        this._begin();\n\n        return this.promise;\n    }\n\n    /**\n     * Pauses the queue, no new operations will be added to the queue\n     */\n    pause(): void {\n        if (!this._paused) {\n            this._paused = true;\n            this.emit(QueueEvent.PAUSED, this);\n        }\n    }\n\n    /**\n     * Resumes the queue from an paused state\n     */\n    resume(): void {\n        if (this._paused) {\n            this._paused = false;\n            this.emit(QueueEvent.RESUMED, this);\n            this._checkNextOperation();\n        }\n    }\n\n    /**\n     * Getter\n     * @returns {boolean}\n     */\n    get isPaused(): boolean {\n        return this._paused;\n    }\n\n    private _preProcessOperations(operations: Operation<any>[]) {\n        try {\n            new CircularOperationValidator(operations);\n        } catch (e) {\n            throw e;\n        }\n\n        operations.forEach((op: Operation<any>) => {\n            if (!this.map[op.id]) {\n                this.map[op.id] = true;\n                op.isInQueue = true;\n                this._bindOperation(op);\n            };\n            this._preProcessOperations(op.dependencies);\n        });\n    }\n\n    private _bindOperation(operation: Operation<any>) {\n        operation.on(OperationEvent.START, this._onOperationStart.bind(this));\n        operation.on(OperationEvent.READY, this._onOperationReady.bind(this));\n        operation.on(OperationEvent.CANCEL, this._onOperationCancel.bind(this));\n        operation.on(OperationEvent.DONE, this._onOperationDone.bind(this));\n    }\n\n    private _unbindOperation(operation: Operation<any>) {\n        operation.off(OperationEvent.START, this._onOperationStart.bind(this));\n        operation.off(OperationEvent.READY, this._onOperationReady.bind(this));\n        operation.off(OperationEvent.CANCEL, this._onOperationCancel.bind(this));\n        operation.off(OperationEvent.DONE, this._onOperationDone.bind(this));\n    }\n\n    private _begin() {\n        if (this.promise) {\n            this._startOperations();\n        } else {\n            this.promise = new Promise((resolve, reject) => {\n\n                this.resolve = resolve;\n                this.reject = reject;\n\n                this._startOperations();\n            });\n        }\n    }\n\n    private _startOperations() {\n        this._processedOperations.forEach(operation => {\n            this._startOperation(operation);\n        });\n    }\n\n    private _startOperation(operation: Operation<any>) {\n        operation.start();\n    }\n\n    private _onOperationStart(operation): void {\n\n    }\n\n    private _onOperationReady(operation: Operation<any>): void {\n        this.readyQueueMap[operation.id] = true;\n        this.queues[operation.queuePriority].push(operation);\n        this._checkNextOperation()\n    }\n\n    private _onOperationDone(operation: Operation<any>): void {\n        this._unbindOperation(operation);\n\n        this.runningQueue = this.runningQueue.filter(op => op.id !== operation.id);\n\n        delete this.map[operation.id];\n        delete this.runningQueueMap[operation.id];\n\n        if (isObjectEmpty(this.map)) {\n            this.emit(QueueEvent.DONE, this);\n            this.done();\n        } else {\n            this._checkNextOperation();\n        }\n    }\n\n    private _checkNextOperation(): void {\n        if (this._paused) {\n            return;\n        }\n\n        if (this.runningQueue.length < this.maximumConcurrentOperations && this.hasOperations()) {\n            const operation = this.getNextOperation();\n            if (operation\n                && !operation.isExecuting\n                || !operation.isCancelled\n                || !this.runningQueueMap[operation.id]) {\n                this.runningQueueMap[operation.id] = true;\n                this.runningQueue.push(operation);\n                operation.main();\n                this._checkNextOperation()\n            }\n        }\n    }\n\n    /**\n     * @returns {boolean}\n     */\n    public hasOperations(): boolean {\n        return !!(this.queues[QueuePriority.veryHigh].length\n            + this.queues[QueuePriority.high].length\n            + this.queues[QueuePriority.normal].length\n            + this.queues[QueuePriority.low].length\n            + this.queues[QueuePriority.veryLow].length);\n    }\n\n    /**\n     * Returns the next operation to be executed\n     *\n     * @returns {?Operation}\n     */\n    public getNextOperation(): Operation<any> {\n        let operation = null;\n        if (this.queues[QueuePriority.veryHigh].length) {\n            operation = this.queues[QueuePriority.veryHigh].pop();\n            return operation;\n        }\n        if (this.queues[QueuePriority.high].length) {\n            operation = this.queues[QueuePriority.high].pop();\n            return operation;\n        }\n        if (this.queues[QueuePriority.normal].length) {\n            operation = this.queues[QueuePriority.normal].pop();\n            return operation;\n        }\n        if (this.queues[QueuePriority.low].length) {\n            operation = this.queues[QueuePriority.low].pop();\n            return operation;\n        }\n        if (this.queues[QueuePriority.veryLow].length) {\n            operation = this.queues[QueuePriority.veryLow].pop();\n            return operation;\n        }\n        return operation;\n    }\n\n    private _onOperationCancel(operation: Operation<any>): void {\n        delete this.map[operation.id];\n        delete this.queues[operation.queuePriority];\n        this.operations = this.operations.filter(op => op.id !== operation.id);\n        if (isObjectEmpty(this.map)) {\n            this.emit(QueueEvent.DONE, this);\n            this.done();\n        }\n    }\n\n}","// Unique ID creation requires a high quality random # generator.  In the\n// browser this is a little complicated due to unknown quality of Math.random()\n// and inconsistent support for the `crypto` API.  We do the best we can via\n// feature-detection\n\n// getRandomValues needs to be invoked in a context where \"this\" is a Crypto\n// implementation. Also, find the complete implementation of crypto on IE11.\nvar getRandomValues = (typeof(crypto) != 'undefined' && crypto.getRandomValues && crypto.getRandomValues.bind(crypto)) ||\n                      (typeof(msCrypto) != 'undefined' && typeof window.msCrypto.getRandomValues == 'function' && msCrypto.getRandomValues.bind(msCrypto));\n\nif (getRandomValues) {\n  // WHATWG crypto RNG - http://wiki.whatwg.org/wiki/Crypto\n  var rnds8 = new Uint8Array(16); // eslint-disable-line no-undef\n\n  module.exports = function whatwgRNG() {\n    getRandomValues(rnds8);\n    return rnds8;\n  };\n} else {\n  // Math.random()-based (RNG)\n  //\n  // If all else fails, use Math.random().  It's fast, but is of unspecified\n  // quality.\n  var rnds = new Array(16);\n\n  module.exports = function mathRNG() {\n    for (var i = 0, r; i < 16; i++) {\n      if ((i & 0x03) === 0) r = Math.random() * 0x100000000;\n      rnds[i] = r >>> ((i & 0x03) << 3) & 0xff;\n    }\n\n    return rnds;\n  };\n}\n","/**\n * Convert array of 16 byte values to UUID string format of the form:\n * XXXXXXXX-XXXX-XXXX-XXXX-XXXXXXXXXXXX\n */\nvar byteToHex = [];\nfor (var i = 0; i < 256; ++i) {\n  byteToHex[i] = (i + 0x100).toString(16).substr(1);\n}\n\nfunction bytesToUuid(buf, offset) {\n  var i = offset || 0;\n  var bth = byteToHex;\n  // join used to fix memory issue caused by concatenation: https://bugs.chromium.org/p/v8/issues/detail?id=3175#c4\n  return ([bth[buf[i++]], bth[buf[i++]], \n\tbth[buf[i++]], bth[buf[i++]], '-',\n\tbth[buf[i++]], bth[buf[i++]], '-',\n\tbth[buf[i++]], bth[buf[i++]], '-',\n\tbth[buf[i++]], bth[buf[i++]], '-',\n\tbth[buf[i++]], bth[buf[i++]],\n\tbth[buf[i++]], bth[buf[i++]],\n\tbth[buf[i++]], bth[buf[i++]]]).join('');\n}\n\nmodule.exports = bytesToUuid;\n","var v1 = require('./v1');\nvar v4 = require('./v4');\n\nvar uuid = v4;\nuuid.v1 = v1;\nuuid.v4 = v4;\n\nmodule.exports = uuid;\n","\nclass CircularOperationValidatorError extends Error {\n    constructor(message) {\n        super();\n        this.message = message;\n    }\n}\n\nclass CircularOperationValidator {\n\n    /**\n     * @param {Array.<Operation>} operations\n     */\n    constructor(operations) {\n        this.operations = operations;\n        this._checkCircular();\n    }\n\n    _checkCircular() {\n        this.operations.forEach(operation => {\n            operation.dependencies.forEach(op => {\n                let map = {};\n                map[operation.id] = Object.keys(map).length;\n                this._verifyOpMap(op, map);                \n                this._checkDependencies(op, map)\n            });\n        });\n    }\n\n    _checkDependencies(operation, mapHash) {\n        operation.dependencies.forEach(op => {\n            let map = JSON.parse(JSON.stringify(mapHash));\n            this._verifyOpMap(op, map);\n            this._checkDependencies(op, map)\n        })\n    }\n\n    /**\n     * @param {Operation} op\n     * @param map\n     * @private\n     */\n    _verifyOpMap(op, map) {\n        if (map[op.id] !== undefined) {\n            this._throwError(op, map)\n        }\n\n        map[op.id] = Object.keys(map).length;\n    }\n\n    _throwError(op, map) {\n        let keys = Object.keys(map);\n\n            let values = {};\n            for (let key in map) {\n                const value = map[key];\n                values[value] = key;\n            }\n\n            values = Object.values(values);\n            values.push(op.id);\n            throw new CircularOperationValidatorError(`Circular: ${values}`);\n    }\n\n}\n\nmodule.exports = {\n    CircularOperationValidator\n};","import { Operation } from './Operation';\n\ntype BlockResult = any[] | any;\n\n/**\n * Operation Subclass that accepts a function as an argument which will be the task to run.\n * Additionally, multiple functions can be appended to run simultaneously as the same task.\n */\nexport class BlockOperation extends Operation<any> {\n\n    public blocks: Function[];\n\n    constructor() {\n        let id;\n        let block;\n\n        const first = arguments[0];\n        if (typeof first === 'number') {\n            id = first;\n            const second = arguments[1];\n            if (typeof second === 'function') {\n                block = second;\n            }\n        } else if (typeof first === 'function') {\n            block = first;\n        } else {\n            throw new Error('Wrong arguments passed: missing ID and/or function');\n        }\n        \n        super(id);\n        this.blocks = [block];\n    }\n\n    /**\n     *\n     */\n    async run(): Promise<BlockResult> {\n        const promises: any[] = [];\n        this.blocks.forEach(block => {\n            promises.push(block(this));\n        });\n\n        const results: any[] = await Promise.all(promises);\n        return results.length === 1\n            ? results[0]\n            : results;\n    }\n\n    /**\n     * Append another function to run simultaneously as the same task\n     * @param {function} block - function to add \n     */\n    addBlock(block: Function) {\n        this.blocks.push(block);\n    }\n}","import { Operation } from './Operation';\nimport { OperationQueue } from './OperationQueue';\n\ntype GroupResult = any[];\n\n/**\n * @class GroupOperation\n */\nexport class GroupOperation<U> extends Operation<any> {\n\n    public operations: Operation<any>[];\n    public queue: OperationQueue;\n\n    constructor() {\n        super();\n        this.queue = new OperationQueue();    \n        this.operations = [];\n    }\n\n    /**\n     * @override\n     * \n     * @returns {Promise}\n     */\n    public async run(): Promise<GroupResult> {\n        await this.queue.addOperations(this.operations);\n\n        const accum: GroupResult = [];\n        return this.operations.reduce((accum, operation) => {\n            accum.push(operation.result);\n            return accum;\n        }, accum);\n    }\n\n    /**\n     * @override\n     */\n    async start() {\n        this.dependencies = [];\n        return super.start();\n    }\n\n    /**\n     * @param {Operation} operation \n     */\n    addOperation(operation) {\n        this.operations.push(operation);\n        this.dependencies = [];\n    }\n\n    /**\n     * @param {Array.<Operation>} operations\n     */\n    addOperations(operations) {\n        this.operations = this.operations.concat(operations);\n        this.dependencies = [];\n    }\n}","\nimport { Operation } from './Operation';\nimport { OperationQueue } from './OperationQueue';\nimport { BlockOperation } from './BlockOperation';\nimport { GroupOperation } from './GroupOperation';\nimport { OperationEvent } from './OperationEvent';\nimport { QueueEvent } from './QueueEvent';\nimport { QueuePriority } from './QueuePriority';\n\nmodule.exports = {\n    Operation,\n    OperationQueue,\n    BlockOperation,\n    GroupOperation,\n    OperationEvent,\n    QueueEvent,\n    QueuePriority\n};","module.exports = function(originalModule) {\n\tif (!originalModule.webpackPolyfill) {\n\t\tvar module = Object.create(originalModule);\n\t\t// module.parent = undefined by default\n\t\tif (!module.children) module.children = [];\n\t\tObject.defineProperty(module, \"loaded\", {\n\t\t\tenumerable: true,\n\t\t\tget: function() {\n\t\t\t\treturn module.l;\n\t\t\t}\n\t\t});\n\t\tObject.defineProperty(module, \"id\", {\n\t\t\tenumerable: true,\n\t\t\tget: function() {\n\t\t\t\treturn module.i;\n\t\t\t}\n\t\t});\n\t\tObject.defineProperty(module, \"exports\", {\n\t\t\tenumerable: true\n\t\t});\n\t\tmodule.webpackPolyfill = 1;\n\t}\n\treturn module;\n};\n","var rng = require('./lib/rng');\nvar bytesToUuid = require('./lib/bytesToUuid');\n\n// **`v1()` - Generate time-based UUID**\n//\n// Inspired by https://github.com/LiosK/UUID.js\n// and http://docs.python.org/library/uuid.html\n\nvar _nodeId;\nvar _clockseq;\n\n// Previous uuid creation time\nvar _lastMSecs = 0;\nvar _lastNSecs = 0;\n\n// See https://github.com/broofa/node-uuid for API details\nfunction v1(options, buf, offset) {\n  var i = buf && offset || 0;\n  var b = buf || [];\n\n  options = options || {};\n  var node = options.node || _nodeId;\n  var clockseq = options.clockseq !== undefined ? options.clockseq : _clockseq;\n\n  // node and clockseq need to be initialized to random values if they're not\n  // specified.  We do this lazily to minimize issues related to insufficient\n  // system entropy.  See #189\n  if (node == null || clockseq == null) {\n    var seedBytes = rng();\n    if (node == null) {\n      // Per 4.5, create and 48-bit node id, (47 random bits + multicast bit = 1)\n      node = _nodeId = [\n        seedBytes[0] | 0x01,\n        seedBytes[1], seedBytes[2], seedBytes[3], seedBytes[4], seedBytes[5]\n      ];\n    }\n    if (clockseq == null) {\n      // Per 4.2.2, randomize (14 bit) clockseq\n      clockseq = _clockseq = (seedBytes[6] << 8 | seedBytes[7]) & 0x3fff;\n    }\n  }\n\n  // UUID timestamps are 100 nano-second units since the Gregorian epoch,\n  // (1582-10-15 00:00).  JSNumbers aren't precise enough for this, so\n  // time is handled internally as 'msecs' (integer milliseconds) and 'nsecs'\n  // (100-nanoseconds offset from msecs) since unix epoch, 1970-01-01 00:00.\n  var msecs = options.msecs !== undefined ? options.msecs : new Date().getTime();\n\n  // Per 4.2.1.2, use count of uuid's generated during the current clock\n  // cycle to simulate higher resolution clock\n  var nsecs = options.nsecs !== undefined ? options.nsecs : _lastNSecs + 1;\n\n  // Time since last uuid creation (in msecs)\n  var dt = (msecs - _lastMSecs) + (nsecs - _lastNSecs)/10000;\n\n  // Per 4.2.1.2, Bump clockseq on clock regression\n  if (dt < 0 && options.clockseq === undefined) {\n    clockseq = clockseq + 1 & 0x3fff;\n  }\n\n  // Reset nsecs if clock regresses (new clockseq) or we've moved onto a new\n  // time interval\n  if ((dt < 0 || msecs > _lastMSecs) && options.nsecs === undefined) {\n    nsecs = 0;\n  }\n\n  // Per 4.2.1.2 Throw error if too many uuids are requested\n  if (nsecs >= 10000) {\n    throw new Error('uuid.v1(): Can\\'t create more than 10M uuids/sec');\n  }\n\n  _lastMSecs = msecs;\n  _lastNSecs = nsecs;\n  _clockseq = clockseq;\n\n  // Per 4.1.4 - Convert from unix epoch to Gregorian epoch\n  msecs += 12219292800000;\n\n  // `time_low`\n  var tl = ((msecs & 0xfffffff) * 10000 + nsecs) % 0x100000000;\n  b[i++] = tl >>> 24 & 0xff;\n  b[i++] = tl >>> 16 & 0xff;\n  b[i++] = tl >>> 8 & 0xff;\n  b[i++] = tl & 0xff;\n\n  // `time_mid`\n  var tmh = (msecs / 0x100000000 * 10000) & 0xfffffff;\n  b[i++] = tmh >>> 8 & 0xff;\n  b[i++] = tmh & 0xff;\n\n  // `time_high_and_version`\n  b[i++] = tmh >>> 24 & 0xf | 0x10; // include version\n  b[i++] = tmh >>> 16 & 0xff;\n\n  // `clock_seq_hi_and_reserved` (Per 4.2.2 - include variant)\n  b[i++] = clockseq >>> 8 | 0x80;\n\n  // `clock_seq_low`\n  b[i++] = clockseq & 0xff;\n\n  // `node`\n  for (var n = 0; n < 6; ++n) {\n    b[i + n] = node[n];\n  }\n\n  return buf ? buf : bytesToUuid(b);\n}\n\nmodule.exports = v1;\n","var rng = require('./lib/rng');\nvar bytesToUuid = require('./lib/bytesToUuid');\n\nfunction v4(options, buf, offset) {\n  var i = buf && offset || 0;\n\n  if (typeof(options) == 'string') {\n    buf = options === 'binary' ? new Array(16) : null;\n    options = null;\n  }\n  options = options || {};\n\n  var rnds = options.random || (options.rng || rng)();\n\n  // Per 4.4, set bits for version and `clock_seq_hi_and_reserved`\n  rnds[6] = (rnds[6] & 0x0f) | 0x40;\n  rnds[8] = (rnds[8] & 0x3f) | 0x80;\n\n  // Copy bytes to buffer, if provided\n  if (buf) {\n    for (var ii = 0; ii < 16; ++ii) {\n      buf[i + ii] = rnds[ii];\n    }\n  }\n\n  return buf || bytesToUuid(rnds);\n}\n\nmodule.exports = v4;\n"],"sourceRoot":""}